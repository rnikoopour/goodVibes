#include <IRLib.h>
#include "remote.h"

IRsend My_Sender;
int piezoPin = 0;
int changeLevel = 50;
int restartLevel = 200;
bool changeColor = true;
 
void setup()
{
  randomSeed(analogRead(0));
  Serial.begin(9600);
}
 
void loop() {
  
  for (char i = 0; i < numButtons; i++) {
    Serial.println("Pressed");
    My_Sender.send(NEC, buttons[i], 32);
    delay(500);
  }
  

 int vibrationLevel = 1023  - analogRead(piezoPin);
 long rand;
 
 if (changeColor && vibrationLevel >= changeLevel) {
   changeColor = false;
   rand = random(1, numButtons);
   My_Sender.send(NEC, buttons[rand], 32);
   rand = random(1000, 5000);
 } else if (!changeColor && vibrationLevel <= restartLevel) {
   changeColor = true;
   Serial.println("Ready to change");
 }
 Serial.println(vibrationLevel);
 delay(100);
 */
 }
